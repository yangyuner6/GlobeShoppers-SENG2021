{% extends 'base.html' %}
{% block body %}
<head>
	<link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous">
	<link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/grids-responsive-min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/otherProfile.css') }}">

</head>
<body>
    <form method = "post">
        <div class = "popup1" id = "myForm2">
        <div class = "pure-form pure-form-aligned form-popup1">
            <fieldset>
                    <h2 class="brand-title"></i> Add Review</h2>
										<div class="rate">
											<input type="radio" id="star5" name="rating" value="5" />
											<label for="star5" title="text">5 stars</label>
											<input type="radio" id="star4" name="rating" value="4" />
											<label for="star4" title="text">4 stars</label>
											<input type="radio" id="star3" name="rating" value="3" />
											<label for="star3" title="text">3 stars</label>
											<input type="radio" id="star2" name="rating" value="2" />
											<label for="star2" title="text">2 stars</label>
											<input type="radio" id="star1" name="rating" value="1" />
											<label for="star1" title="text">1 star</label>
										</div>
                    <div class="pure-control-group">
                        <input name="review" type="text" placeholder="Review" class = reviewi>
                    </div>
                    <div class = edit>
                        <button type="submit" class="pure-button pure-button2" name = reviewButton onclick = "return check()"><i class="fas fa-star"></i></button>
                        <button type="button" class="pure-button pure-button2" onclick="closeForm2()"><i class="fas fa-times"></i></button>
                    </div>
                </fieldset>
        </div>
    </div>
    <div class = "popup1" id = "myForm">
        <div method = "POST" class = "pure-form pure-form-aligned form-popup1">
            <fieldset>
                <h2 class="brand-title">Send a message to {{User["username"]}}</h2>
                <div class="pure-control-group">
                    <textarea id = "message" name = "message" cols = "30" rows = "5" placeholder = "Type a message..."></textarea>
                </div>
                <div class = edit>
                    <button type="submit" class="pure-button pure-button2" name = messageButton onclick = "return check2()"><i class="fas fa-comments"></i></button>
                    <button type="button" class="pure-button pure-button2" onclick="closeForm()"><i class="fas fa-times"></i></button>
                </div>
            </fieldset>
        </div>
    </div>

        <div class="header">
            <div>
                <button class="pure-button-disabled">
                    {% if "review" not in User or User["review"]|length == 0%}
                    <b>No Ratings</b>
                    {% else %}
                    <div> Average Rating </div>
                        {% if "0.5" == User["aveRating"] %}
                                        <span class="fa fa-star-half-alt"></span>
                                        <span class="far fa-star"></span>
                                        <span class="far fa-star"></span>
                                        <span class="far fa-star"></span>
                                        <span class="far fa-star"></span>
                                    {% elif "1" == User["aveRating"] or "1.0" == User["aveRating"] %}
                                        <span class="fa fa-star"></span>
                                        <span class="far fa-star"></span>
                                        <span class="far fa-star"></span>
                                        <span class="far fa-star"></span>
                                        <span class="far fa-star"></span>
                                    {% elif "1.5" == User["aveRating"] %}
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star-half-alt"></span>
                                        <span class="far fa-star"></span>
                                        <span class="far fa-star"></span>
                                        <span class="far fa-star"></span>
                                    {% elif "2" == User["aveRating"] or "2.0" == User["aveRating"]%}
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="far fa-star"></span>
                                        <span class="far fa-star"></span>
                                        <span class="far fa-star"></span>
                                    {% elif "2.5" == User["aveRating"] %}
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star-half-alt"></span>
                                        <span class="far fa-star"></span>
                                        <span class="far fa-star"></span>
                                    {% elif "3" == User["aveRating"] or "3.0" == User["aveRating"]%}
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="far fa-star"></span>
                                        <span class="far fa-star"></span>
                                    {% elif "3.5" == User["aveRating"] %}
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star-half-alt"></span>
                                        <span class="far fa-star"></span>
                                    {% elif "4" == User["aveRating"] or "4.0" == User["aveRating"]%}
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="far fa-star"></span>
                                    {% elif "4.5" == User["aveRating"] %}
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star-half-alt"></span>
                                    {% elif "5" == User["aveRating"] or "5.0" == User["aveRating"]%}
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                        <span class="fa fa-star"></span>
                                    {% endif %}
                    {% endif %}
                </button>
            </div>
            
            {% if User["image"] %}
            <img width = 120px height = 120px src = '{{User["image"]}}'>
            {% else %}
            <i class="fas fa-user-circle fa-6x"></i>
            {% endif %}
            <h2 class="brand-title">{{User["username"]}}</h1>
            <div class = city><i>{{User["city"]}}</i></div>
            {% if bio == 1%}
                <h2 class="bio brand-tagline"><i>{{User["about"]}} </i></h2>
            {% endif %}
            <nav class="nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <button type = button class="pure-button" onclick = "openForm()">
                            <i class="fas fa-comments"></i>
                        </button>
                    </li>
                    {% if check == 1%}
                    <li class="nav-item">
                        <button type = button class="pure-button"  onclick = "openForm2()">
                            <i class="fas fa-star"></i>
                        </button>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <button type = button class="pure-button" disabled>
                            <i class="fas fa-star"></i>
                        </button>
                    </li>
                    {% endif %}
                </ul>
            </nav>
    </div>
    <div class="content pure-u-1">
        <div>
            <div class="posts">
                <h1 class="content-subhead">Completed Offers</h1>
                {% if offers == []%}
                    No Completed Offers
                {% endif %}
                <section class="post">
                    <div class="2-content">
                        <div class="pricing-tables pure-g">
                                {% for o in offers %}
                                <div class="pure-u-1-3 pure-u-md-1-4">
                                    <div class="pricing-table pricing-table-free">
                                        <div>
                                        <img class = "img" src="{{o['_image']}}" alt = product onclick="window.location.href= '{{url_for('product',productName= o['_name'])}}';">
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                        </div>
                    </div>
                </section>
                <h1 class="content-subhead">Trips</h1>
                {% if "trip" not in User%}
                    No Trips
                {% elif User["trip"]|length == 0 %}
                    No Trips
                {% endif %}
                <section class="post">
                    <div class="2-content">
                        <div class="pricing-tables pure-g">
                                {% for r in User["trip"] %}
                                <div class="pure-u-1-3 pure-u-md-1-4">
                                    <div class="pricing-table pricing-table-free">
                                        <div>
                                            <div>
                                                <i class="fas fa-plane fa-7x"></i>
                                            </div>
                                            <h2 class = "brand-tagline place">{{r["country"]}}</h2>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                        </div>
                    </div>
                </section>
                <h1 class="content-subhead">Reviews</h1>
                {% if "review" not in User%}
                    No Reviews
                {% elif User["review"]|length == 0 %}
                    No Reviews
                {% endif %}
                <section class="post">
                    <div class="3-content">
                        <div class="pricing-tables pure-g">
                        {% for r in User["review"] %}
                            <div class="pure-u-1-2 pure-u-md-1-2">
                                <div class="pricing-table pricing-table-free">
                                    <div onclick="window.location.href= '{{url_for('otherProfile',user= r['reviewer'])}}';">
                                    {% if reviews[loop.index-1] != 0 %}
                                    <img width = 120px height = 120px src = '{{reviews[loop.index-1]}}'>
                                    {% else %}
                                    <i class="fas fa-user-circle fa-8x"></i>
                                    {% endif %}
                                    <div>{{r["reviewer"]}}</div>
                                    </div>
                                    {% if r["rating"] == 0 %}
                                        <span class="far fa-star not"></span>
                                        <span class="far fa-star not"></span>
                                        <span class="far fa-star not"></span>
                                        <span class="far fa-star not"></span>
                                        <span class="far fa-star not"></span>
                                    {% elif "1" == r["rating"] %}
                                        <span class="fa fa-star checked"></span>
                                        <span class="far fa-star not"></span>
                                        <span class="far fa-star not"></span>
                                        <span class="far fa-star not"></span>
                                        <span class="far fa-star not"></span>
                                    {% elif "2" == r["rating"] %}
                                        <span class="fa fa-star checked"></span>
                                        <span class="fa fa-star checked"></span>
                                        <span class="far fa-star not"></span>
                                        <span class="far fa-star not"></span>
                                        <span class="far fa-star not"></span>
                                    {% elif "3" == r["rating"] %}
                                        <span class="fa fa-star checked"></span>
                                        <span class="fa fa-star checked"></span>
                                        <span class="fa fa-star checked"></span>
                                        <span class="far fa-star not"></span>
                                        <span class="far fa-star not"></span>
                                    {% elif "4" == r["rating"] %}
                                        <span class="fa fa-star checked"></span>
                                        <span class="fa fa-star checked"></span>
                                        <span class="fa fa-star checked"></span>
                                        <span class="fa fa-star checked"></span>
                                        <span class="far fa-star not"></span>
                                    {% elif "5" == r["rating"] %}
                                        <span class="fa fa-star checked"></span>
                                        <span class="fa fa-star checked"></span>
                                        <span class="fa fa-star checked"></span>
                                        <span class="fa fa-star checked"></span>
                                        <span class="fa fa-star checked"></span>
                                    {% endif %}
                                    <div class = review>
                                        <i>{{r["comment"]}}</i>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
            </section>
        </div>
    </form>
</body>
<script>
function openForm() {
  document.getElementById("myForm").style.display = "block";
  document.getElementById("myForm2").style.display = "none";
}

function openForm2() {
  document.getElementById("myForm2").style.display = "block";
  document.getElementById("myForm").style.display = "none";
}

function closeForm() {
  document.getElementById("myForm").style.display = "none";
}

function closeForm2() {
  document.getElementById("myForm2").style.display = "none";
}

function check() {
    if ((document.getElementById("st5").checked === false) && (document.getElementById("st4").checked === false) && (document.getElementById("st3").checked === false) && (document.getElementById("st2").checked === false) && (document.getElementById("st1").checked === false)) {
        alert('Select a rating');
        return false;
    }
    else {
        return true;
    }
}

function check2() {
    if (document.getElementById("message").value === "") {
        alert('No message sent');
        return false;
    }
    return true;
}
</script>
{% endblock %}
